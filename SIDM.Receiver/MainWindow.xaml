<Window x:Class="SIDM.Receiver.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="SIDM - Terminal" Height="600" Width="600"
        WindowStyle="None" AllowsTransparency="True" Background="Transparent"
        Topmost="True" ShowInTaskbar="True" WindowStartupLocation="Manual">

	<Window.Resources>
		<SolidColorBrush x:Key="ColorGuinda" Color="#9F2241"/>
		<SolidColorBrush x:Key="ColorDorado" Color="#BC955C"/>
		<SolidColorBrush x:Key="ColorGrisOscuro" Color="#2D2D2D"/>
		<SolidColorBrush x:Key="ColorGrisClaro" Color="#F2F2F2"/>

		<Style x:Key="BotonAccion" TargetType="Button">
			<Setter Property="Background" Value="#1E8449"/>
			<Setter Property="Foreground" Value="White"/>
			<Setter Property="FontSize" Value="14"/>
			<Setter Property="FontWeight" Value="Bold"/>
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="Button">
						<Border Name="btnBorder" Background="{TemplateBinding Background}" CornerRadius="22">
							<ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
						</Border>
						<ControlTemplate.Triggers>
							<Trigger Property="IsMouseOver" Value="True">
								<Setter TargetName="btnBorder" Property="Opacity" Value="0.9"/>
							</Trigger>
						</ControlTemplate.Triggers>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>
	</Window.Resources>

	<Border Name="MainBorder" Background="White" CornerRadius="24" BorderBrush="{StaticResource ColorDorado}" BorderThickness="1.5">
		<Border.Effect>
			<DropShadowEffect BlurRadius="25" ShadowDepth="0" Opacity="0.3" Color="Black"/>
		</Border.Effect>

		<Grid>
			<Grid Name="GridAlerta" Visibility="Visible">
				<Grid.RowDefinitions>
					<RowDefinition Height="65"/>
					<RowDefinition Height="Auto"/>
					<RowDefinition Height="*"/>
					<RowDefinition Height="85"/>
				</Grid.RowDefinitions>

				<Border Name="HeaderBar" Grid.Row="0" Background="{StaticResource ColorGuinda}" CornerRadius="22,22,0,0" MouseLeftButtonDown="HeaderBar_MouseLeftButtonDown">
					<Grid Margin="20,0">
						<StackPanel Orientation="Horizontal" VerticalAlignment="Center">
							<Ellipse Width="10" Height="10" Fill="#2ECC71" Margin="0,0,10,0">
								<Ellipse.Effect>
									<BlurEffect Radius="4"/>
								</Ellipse.Effect>
							</Ellipse>
							<TextBlock Text="SISTEMA DE DIFUSIÓN INSTITUCIONAL" Foreground="White" FontWeight="SemiBold" FontSize="13" VerticalAlignment="Center"/>
						</StackPanel>
						<Button Content="" FontFamily="Segoe MDL2 Assets" HorizontalAlignment="Right" Width="40" Background="Transparent" Foreground="White" BorderThickness="0" FontSize="16" Click="BtnMinimizar_Click" Cursor="Hand"/>
					</Grid>
				</Border>

				<Border Grid.Row="1" Background="{StaticResource ColorGrisClaro}" Margin="20,20,20,10" CornerRadius="16" Padding="20">
					<StackPanel>
						<TextBlock Name="txtPrioridad" Text="ESPERANDO ALERTA" FontSize="11" FontWeight="Black" Foreground="{StaticResource ColorDorado}" HorizontalAlignment="Center" Margin="0,0,0,8"/>
						<ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled" MaxHeight="130">
							<TextBlock Name="txtMensaje" Text="No hay mensajes activos en este momento." FontSize="20" FontWeight="Bold" TextWrapping="Wrap" TextAlignment="Center" Foreground="{StaticResource ColorGrisOscuro}" FontFamily="Segoe UI Semibold"/>
						</ScrollViewer>
					</StackPanel>
				</Border>

				<Grid Grid.Row="2" Margin="20,5">
					<Grid.RowDefinitions>
						<RowDefinition Height="Auto"/>
						<RowDefinition Height="*"/>
					</Grid.RowDefinitions>
					<TextBlock Text="HISTORIAL DE COMUNICACIONES" FontSize="10" FontWeight="Bold" Foreground="#A0A0A0" HorizontalAlignment="Left" Margin="10,0,0,8"/>

					<ListBox x:Name="lstHistorial" Grid.Row="1" Background="Transparent" BorderThickness="0" HorizontalContentAlignment="Stretch" ScrollViewer.HorizontalScrollBarVisibility="Disabled">
						<ListBox.ItemTemplate>
							<DataTemplate>
								<Border Background="White" CornerRadius="12" Margin="0,0,5,10" BorderBrush="#EAEAEA" BorderThickness="1">
									<Border.Effect>
										<DropShadowEffect BlurRadius="8" ShadowDepth="1" Opacity="0.05"/>
									</Border.Effect>
									<Grid Margin="12">
										<Grid.ColumnDefinitions>
											<ColumnDefinition Width="4"/>
											<ColumnDefinition Width="115"/>
											<ColumnDefinition Width="*"/>
										</Grid.ColumnDefinitions>

										<Rectangle Fill="{Binding ColorPrioridad}" RadiusX="2" RadiusY="2"/>

										<TextBlock Grid.Column="1" Text="{Binding Hora}" VerticalAlignment="Center" HorizontalAlignment="Center" FontWeight="Bold" Foreground="#888" FontSize="10.5" TextWrapping="Wrap" TextAlignment="Center"/>

										<StackPanel Grid.Column="2" Margin="10,0,0,0">
											<TextBlock Text="{Binding PrioridadTexto}" FontSize="9" FontWeight="Black" Foreground="{Binding ColorPrioridad}" Margin="0,0,0,4"/>
											<TextBlock Text="{Binding Texto}" TextWrapping="Wrap" FontSize="13" Foreground="#333" LineHeight="18"/>
										</StackPanel>
									</Grid>
								</Border>
							</DataTemplate>
						</ListBox.ItemTemplate>
					</ListBox>
				</Grid>

				<Border Grid.Row="3" Background="White" CornerRadius="0,0,22,22">
					<Button Content="CONFIRMAR Y CERRAR" Width="260" Height="45" Style="{StaticResource BotonAccion}" Click="BtnOk_Click" Cursor="Hand"/>
				</Border>
			</Grid>

			<Grid Name="GridBurbuja" Visibility="Collapsed" Cursor="Hand" Background="Transparent" MouseLeftButtonDown="GridBurbuja_MouseLeftButtonDown">
				<Grid Width="95" Height="95" HorizontalAlignment="Center" VerticalAlignment="Center">
					<Ellipse Name="EllipseBurbuja" Fill="{StaticResource ColorGuinda}">
						<Ellipse.Effect>
							<DropShadowEffect BlurRadius="20" ShadowDepth="4" Opacity="0.4"/>
						</Ellipse.Effect>
					</Ellipse>
					<Ellipse Fill="Transparent" Stroke="{StaticResource ColorDorado}" StrokeThickness="3" Margin="6"/>
					<TextBlock Text="🔔" FontSize="38" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,0,0,4"/>
					<Border Name="BadgeAlerta" Background="#FF3B30" CornerRadius="11" Width="22" Height="22" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="2" BorderBrush="White" BorderThickness="2" Visibility="Collapsed">
						<Border.Effect>
							<DropShadowEffect BlurRadius="6" ShadowDepth="2" Opacity="0.3"/>
						</Border.Effect>
					</Border>
				</Grid>
			</Grid>
		</Grid>
	</Border>
</Window>