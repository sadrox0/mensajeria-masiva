<Window x:Class="SIDM.Receiver.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="SIDM Terminal" Height="400" Width="500"
        WindowStyle="None" AllowsTransparency="True" Background="Transparent"
        Topmost="True" ShowInTaskbar="True" WindowStartupLocation="Manual">

	<Window.Resources>
		<SolidColorBrush x:Key="ColorPrincipal" Color="#9F2241"/>
		<SolidColorBrush x:Key="ColorDorado" Color="#BC955C"/>

		<Style x:Key="BotonAccion" TargetType="Button">
			<Setter Property="Background" Value="#1E8449"/>
			<Setter Property="Foreground" Value="White"/>
			<Setter Property="FontSize" Value="14"/>
			<Setter Property="FontWeight" Value="Bold"/>
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="Button">
						<Border Name="btnBorder" Background="{TemplateBinding Background}" CornerRadius="20">
							<ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
						</Border>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>
	</Window.Resources>

	<Border Name="MainBorder" Background="White" CornerRadius="24" BorderBrush="{StaticResource ColorDorado}" BorderThickness="1.5">
		<Grid>
			<Grid Name="GridAlerta" Visibility="Visible">
				<Grid.RowDefinitions>
					<RowDefinition Height="55"/>
					<RowDefinition Height="Auto"/>
					<RowDefinition Height="*"/>
					<RowDefinition Height="75"/>
				</Grid.RowDefinitions>

				<Border Name="HeaderBar" Grid.Row="0" Background="{StaticResource ColorPrincipal}" CornerRadius="22,22,0,0" MouseLeftButtonDown="HeaderBar_MouseLeftButtonDown">
					<TextBlock Text="SISTEMA DE DIFUSIÓN INSTITUCIONAL" Foreground="White" FontWeight="SemiBold" VerticalAlignment="Center" HorizontalAlignment="Center" FontSize="12"/>
				</Border>

				<Border Grid.Row="1" Background="#F2F2F2" Margin="15,15,15,5" CornerRadius="12" Padding="15">
					<StackPanel>
						<TextBlock Name="txtPrioridad" Text="ESPERANDO ALERTA" FontSize="11" FontWeight="Black" HorizontalAlignment="Center" Margin="0,0,0,5"/>
						<TextBlock Name="txtMensaje" Text="No hay mensajes activos." FontSize="18" FontWeight="Bold" TextWrapping="Wrap" TextAlignment="Center" Foreground="#2D2D2D" LineHeight="22"/>
					</StackPanel>
				</Border>

				<ListBox x:Name="lstHistorial" Grid.Row="2" Margin="15,5" Background="Transparent" BorderThickness="0" ScrollViewer.HorizontalScrollBarVisibility="Disabled">
					<ListBox.ItemTemplate>
						<DataTemplate>
							<Border Background="White" CornerRadius="12" Margin="0,0,5,10" BorderBrush="#EAEAEA" BorderThickness="1.2" Width="440" MinHeight="60" >
								<Grid Margin="12">
									<Grid.ColumnDefinitions>
										<ColumnDefinition Width="4"/>
										<ColumnDefinition Width="*"/>
									</Grid.ColumnDefinitions>
									<Rectangle Fill="{Binding ColorPrioridad}" RadiusX="2" RadiusY="2" Width="3" HorizontalAlignment="Left"/>
									<StackPanel Grid.Column="1" Margin="12,0,0,0">
										<Grid>
											<TextBlock Text="{Binding Hora}" FontSize="10" Foreground="#888" VerticalAlignment="Center"/>
											<TextBlock Text="{Binding PrioridadTexto}" FontSize="10" FontWeight="Black" Foreground="{Binding ColorPrioridad}" HorizontalAlignment="Right"/>
										</Grid>
										<ScrollViewer VerticalScrollBarVisibility="Auto" Height="45" Margin="0,5,0,0">
											<TextBlock Text="{Binding Texto}" TextWrapping="Wrap" FontSize="13" Foreground="#333" LineHeight="16"/>
										</ScrollViewer>
									</StackPanel>
								</Grid>
							</Border>
						</DataTemplate>
					</ListBox.ItemTemplate>
				</ListBox>

				<Button Grid.Row="3" Content="CONFIRMAR LECTURA" Width="240" Height="42" Style="{StaticResource BotonAccion}" Click="BtnOk_Click" HorizontalAlignment="Center"/>
			</Grid>

			<Grid Name="GridBurbuja" Visibility="Collapsed" Cursor="Hand" Background="Transparent" MouseLeftButtonDown="GridBurbuja_MouseLeftButtonDown">
				<StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
					<Grid x:Name="GridPopUpMessenger" Visibility="Collapsed" Margin="0,0,0,8">
						<Border Background="White" CornerRadius="12" Padding="10" BorderBrush="{StaticResource ColorPrincipal}" BorderThickness="1" MaxWidth="160">
							<TextBlock x:Name="txtPopUp" FontSize="11" Foreground="#333" TextWrapping="Wrap" FontWeight="SemiBold" TextAlignment="Center"/>
						</Border>
					</Grid>
					<Grid Width="90" Height="90">
						<Ellipse Name="EllipseBurbuja" Fill="{StaticResource ColorPrincipal}"/>
						<Ellipse Fill="Transparent" Stroke="{StaticResource ColorDorado}" StrokeThickness="2" Margin="7"/>
						<TextBlock Text="🔔" FontSize="36" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,0,0,3"/>
						<Border Name="BadgeAlerta" Background="#FF3B30" CornerRadius="10" Width="20" Height="20" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="2" BorderBrush="White" BorderThickness="2" Visibility="Collapsed">
							<TextBlock Text="!" Foreground="White" FontWeight="Bold" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="11"/>
						</Border>
					</Grid>
				</StackPanel>
			</Grid>
		</Grid>
	</Border>
</Window>