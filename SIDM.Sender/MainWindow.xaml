<Window x:Class="SIDM.Sender.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="SIDM - Consola de Mando 911" Height="750" Width="950"
        WindowStartupLocation="CenterScreen" Background="#F0F0F0">

	<Window.Resources>
		<SolidColorBrush x:Key="ColorGuinda" Color="#9F2241"/>
		<SolidColorBrush x:Key="ColorDorado" Color="#BC955C"/>
		<SolidColorBrush x:Key="ColorGris" Color="#58595A"/>

		<Style x:Key="BotonEnviarChulo" TargetType="Button">
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="Button">
						<Border Name="Border" CornerRadius="25" BorderBrush="#BC955C" BorderThickness="2">
							<Border.Background>
								<LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
									<GradientStop Color="#B3284A" Offset="0"/>
									<GradientStop Color="#801A32" Offset="1"/>
								</LinearGradientBrush>
							</Border.Background>
							<ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
						</Border>
						<ControlTemplate.Triggers>
							<Trigger Property="IsMouseOver" Value="True">
								<Setter TargetName="Border" Property="Opacity" Value="0.9"/>
							</Trigger>
						</ControlTemplate.Triggers>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>
	</Window.Resources>

	<Grid>
		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="*"/>
			<ColumnDefinition x:Name="ColHistorial" Width="0"/>
		</Grid.ColumnDefinitions>

		<Grid Grid.Column="0">
			<Grid.RowDefinitions>
				<RowDefinition Height="Auto"/>
				<RowDefinition Height="*"/>
				<RowDefinition Height="45"/>
			</Grid.RowDefinitions>

			<StackPanel Grid.Row="0">
				<Border Background="White" Padding="25,12">
					<Grid>
						<StackPanel Orientation="Horizontal">
							<Image Source="https://www.c5.cdmx.gob.mx/themes/base/assets/images/logos/Logo_CDMX.png" Height="50"/>
							<Rectangle Width="1.5" Fill="#9F2241" Height="35" Margin="20,0" Opacity="0.3"/>
							<StackPanel VerticalAlignment="Center">
								<TextBlock Text="CENTRO DE COMANDO, CONTROL, CÓMPUTO," Foreground="#9F2241" FontSize="9" FontWeight="Bold"/>
								<TextBlock Text="COMUNICACIONES Y CONTACTO CIUDADANO" Foreground="#9F2241" FontSize="9" FontWeight="Bold"/>
								<TextBlock Text="DE LA CIUDAD DE MÉXICO" Foreground="#58595A" FontSize="9" FontWeight="SemiBold"/>
							</StackPanel>
						</StackPanel>
						<Button HorizontalAlignment="Right" VerticalAlignment="Center" Background="Transparent" BorderThickness="1.5" BorderBrush="{StaticResource ColorGuinda}" Padding="10,5" Click="ToggleHistorial_Click" Cursor="Hand">
							<TextBlock Text="📋 HISTORIAL" FontWeight="Bold" Foreground="{StaticResource ColorGuinda}"/>
						</Button>
					</Grid>
				</Border>
				<Border Background="#9F2241" Height="55" BorderBrush="#BC955C" BorderThickness="0,3,0,0">
					<TextBlock Text="DIFUSIÓN DE EMERGENCIAS 911" Foreground="White" FontSize="22" FontWeight="Black" HorizontalAlignment="Center" VerticalAlignment="Center"/>
				</Border>
			</StackPanel>

			<Border Grid.Row="1" Background="White" Margin="40,20" CornerRadius="30">
				<Border.Effect>
					<DropShadowEffect BlurRadius="15" Direction="270" ShadowDepth="5" Opacity="0.1"/>
				</Border.Effect>
				<StackPanel Margin="35,25">
					<TextBlock Text="REDACTAR COMUNICADO" FontWeight="Bold" Foreground="#9F2241" FontSize="13" Margin="0,0,0,10"/>
					<Border BorderBrush="#F0F0F0" BorderThickness="1.5" CornerRadius="12" Background="#FAFAFA">
						<Grid>
							<TextBox Name="txtInput" Height="200" TextWrapping="Wrap" AcceptsReturn="True" BorderThickness="0" Padding="15" FontSize="16" Background="Transparent"/>
							<TextBlock Text="Escribe el mensaje oficial aquí..." IsHitTestVisible="False" Margin="18,15" FontSize="16" Foreground="DarkGray">
								<TextBlock.Style>
									<Style TargetType="TextBlock">
										<Setter Property="Visibility" Value="Collapsed"/>
										<Style.Triggers>
											<DataTrigger Binding="{Binding Text, ElementName=txtInput}" Value="">
												<Setter Property="Visibility" Value="Visible"/>
											</DataTrigger>
										</Style.Triggers>
									</Style>
								</TextBlock.Style>
							</TextBlock>
						</Grid>
					</Border>
					<TextBlock Text="NIVEL DE PRIORIDAD" FontWeight="Bold" Foreground="#58595A" FontSize="12" Margin="0,20,0,8"/>
					<ComboBox Name="cbNivel" Height="45" VerticalContentAlignment="Center" FontSize="14" SelectedIndex="0">
						<ComboBoxItem Content="Informativo"/>
						<ComboBoxItem Content="Urgente"/>
					</ComboBox>
					<Button Height="60" Width="280" Margin="0,30,0,0" Style="{StaticResource BotonEnviarChulo}" Click="Send_Click">
						<TextBlock Text="Enviar Mensaje" FontSize="18" FontWeight="Bold" Foreground="White"/>
					</Button>
				</StackPanel>
			</Border>

			<StatusBar Grid.Row="2" Background="#58595A" BorderBrush="#BC955C" BorderThickness="0,2,0,0">
				<StatusBarItem Margin="20,0">
					<TextBlock Text="● CONEXIÓN ESTABLE" Foreground="#00FF41" FontSize="10" FontWeight="Bold"/>
				</StatusBarItem>
			</StatusBar>
		</Grid>

		<Border Grid.Column="1" Background="#F8F8F8" BorderBrush="#BC955C" BorderThickness="2,0,0,0">
			<Grid>
				<Grid.RowDefinitions>
					<RowDefinition Height="60"/>
					<RowDefinition Height="*"/>
				</Grid.RowDefinitions>
				<Border Background="{StaticResource ColorGuinda}" Padding="15">
					<Grid>
						<TextBlock Text="HISTORIAL DE SERVIDOR" Foreground="White" FontWeight="Bold" VerticalAlignment="Center"/>
						<Button Content="X" HorizontalAlignment="Right" Background="Transparent" BorderThickness="0" Foreground="White" FontWeight="Bold" Click="ToggleHistorial_Click" Cursor="Hand"/>
					</Grid>
				</Border>
				<ListBox x:Name="lstHistorial" Grid.Row="1" Background="Transparent" BorderThickness="0" Padding="10" ScrollViewer.HorizontalScrollBarVisibility="Disabled">
					<ListBox.ItemTemplate>
						<DataTemplate>
							<Border Background="White" CornerRadius="10" Margin="0,0,0,10" BorderBrush="#DDD" BorderThickness="1" Width="440">
								<Grid Margin="15">
									<Grid.RowDefinitions>
										<RowDefinition Height="Auto"/>
										<RowDefinition Height="*"/>
									</Grid.RowDefinitions>
									<Grid Grid.Row="0">
										<TextBlock Text="{Binding Hora}" FontSize="10" Foreground="Gray"/>
										<TextBlock Text="{Binding PrioridadTexto}" HorizontalAlignment="Right" FontSize="10" FontWeight="Black" Foreground="{Binding ColorPrioridad}"/>
									</Grid>
									<TextBlock Grid.Row="1" Text="{Binding Texto}" TextWrapping="Wrap" FontSize="13" Margin="0,8,0,0" Foreground="#333" LineHeight="18"/>
								</Grid>
							</Border>
						</DataTemplate>
					</ListBox.ItemTemplate>
				</ListBox>
			</Grid>
		</Border>
	</Grid>
</Window>